(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{256:function(e,t,a){e.exports=a(436)},435:function(e,t,a){},436:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(61),o=a.n(r),s=(a(261),a(16)),i=a(17),c=a(18),u=a(19),m=a(20),h=a(51),d=a(55),p=a(447),g=a(21),b=a.n(g),E=a(25),f=a(23),v=a.n(f),y=a(449),k=a(437),C=a(450),x=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={email:"",password:"",errorMessage:""},a.onFormChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState((function(){return Object(E.a)({},n,l)}))},a.onFormSubmit=function(e){var t,n,l;return b.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:e.preventDefault(),t=a.state,n=t.email,l=t.password,localStorage.setItem("email",n),v.a.post("/api/auth",{email:n,password:l}).then((function(e){console.log("response: ",e),localStorage.setItem("status",e.data),a.props.history.push("/")})).catch((function(e){a.setState({errorMessage:e.response.data}),console.log("login error ".concat(e.response.data))}));case 4:case"end":return r.stop()}}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement(y.a,{className:"entrance-center",size:"mini",trigger:l.a.createElement(k.a,{className:"big olive ui button",onClick:this.handleOpen,style:{width:"140px"}},l.a.createElement("i",{className:"check icon"}),"Login"),open:this.state.modalOpen,onClose:this.handleClose},l.a.createElement(y.a.Content,null,l.a.createElement("div",{onSubmit:this.onFormSubmit},this.state.errorMessage&&l.a.createElement("h3",{style:{color:"red",textAlign:"center"}},"  ",this.state.errorMessage),l.a.createElement(C.a,null,l.a.createElement(C.a.Field,null,l.a.createElement("div",{className:"ui labeled input"},l.a.createElement("label",{className:"ui right pointing label",style:{width:"40px"}},l.a.createElement("i",{className:"at icon"})),l.a.createElement(C.a.Input,{className:"ui labelled input",placeholder:"Email",name:"email",value:this.state.email,onChange:this.onFormChange}))),l.a.createElement(C.a.Field,null,l.a.createElement("div",{className:"ui labeled input"},l.a.createElement("label",{className:"ui right pointing label",style:{width:"40px"}},l.a.createElement("i",{className:"lock icon"})),l.a.createElement(C.a.Input,{className:"ui labelled input",placeholder:"Password",name:"password",type:"password",value:this.state.password,onChange:this.onFormChange}))),l.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},l.a.createElement(k.a,{className:"big olive ui button"},l.a.createElement("i",{className:"check icon"}),"Login"))))))}}]),t}(n.Component),O=Object(d.f)(x),w=a(445),j=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={name:"",email:"",password:"",passwordconf:"",errorMessage:""},a.onFormChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(E.a)({},n,l))},a.onFormSubmit=function(e){var t,n,l,r,o;return b.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(e.preventDefault(),t=a.state,n=t.name,l=t.email,r=t.password,o=t.passwordconf,r===o){s.next=4;break}return s.abrupt("return",a.setState({errorMessage:"confirm password"}));case 4:v.a.post("/api/users",{name:n,email:l,password:r}).then((function(e){localStorage.setItem("status",e.headers["x-auth-token"]),a.props.history.push("/")})).catch((function(e){a.setState({errorMessage:e.response.data}),console.log("login error ".concat(e.response.data))}));case 5:case"end":return s.stop()}}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement(y.a,{className:"entrance-center",size:"mini",trigger:l.a.createElement(k.a,{className:"big orange ui button",onClick:this.handleOpen,style:{width:"140px"}},l.a.createElement("i",{className:"edit icon"}),"Sign up"),open:this.state.modalOpen,onClose:this.handleClose},l.a.createElement(y.a.Content,null,l.a.createElement("div",{onSubmit:this.onFormSubmit},this.state.errorMessage&&l.a.createElement("h3",{style:{color:"red",textAlign:"center"}},"    ",this.state.errorMessage),l.a.createElement(C.a,null,l.a.createElement(C.a.Field,null,l.a.createElement("div",{className:"ui labeled input"},l.a.createElement("label",{className:"ui right pointing label",style:{width:"40px"}},l.a.createElement("i",{className:"user icon"})),l.a.createElement(w.a,{placeholder:"Name (min. 5 char.)",name:"name",value:this.state.name,onChange:this.onFormChange}))),l.a.createElement(C.a.Field,null,l.a.createElement("div",{className:"ui labeled input"},l.a.createElement("label",{className:"ui right pointing label",style:{width:"40px"}},l.a.createElement("i",{className:"at icon"})),l.a.createElement(w.a,{placeholder:"Email",name:"email",value:this.state.email,onChange:this.onFormChange}))),l.a.createElement(C.a.Field,null,l.a.createElement("div",{className:"ui labeled input"},l.a.createElement("label",{className:"ui right pointing label",style:{width:"40px"}},l.a.createElement("i",{className:"lock icon"})),l.a.createElement(w.a,{className:"ui labelled input",placeholder:"Password (min. 5 char.)",name:"password",value:this.state.password,onChange:this.onFormChange,type:"password"}))),l.a.createElement(C.a.Field,null,l.a.createElement("div",{className:"ui labeled input"},l.a.createElement("label",{className:"ui right pointing label",style:{width:"40px"}},l.a.createElement("i",{className:"check icon"})),l.a.createElement(w.a,{className:"ui labelled input",placeholder:"Confirm password",name:"passwordconf",value:this.state.passwordconf,onChange:this.onFormChange,type:"password"}))),l.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},l.a.createElement(k.a,{className:"big orange ui button",type:"submit"},l.a.createElement("i",{className:"edit icon"}),"Sign up"))))))}}]),t}(n.Component),N=Object(d.f)(j),F=function(){return l.a.createElement("div",null,l.a.createElement("div",{style:{marginTop:"14px",display:"flex",justifyContent:"center"}},l.a.createElement(O,null),l.a.createElement(N,null)),l.a.createElement("div",{className:"ui segment"},l.a.createElement("img",{src:"./bookstorm.jpg",alt:"book in storm",style:{width:"100%"}})))},S=a(63),B=a(451),T=a(446),P=[{value:"",text:"cancel this selection"},{value:"romance",text:"Romance"},{value:"fantasy",text:"Fantasy"},{value:"horror",text:"Horror"},{value:"crime",text:"Crime"},{value:"thriller",text:"Thriller"},{value:"academic",text:"Academic"},{value:"scifi",text:"Scifi"}],A=function(){return localStorage.getItem("status")?localStorage.getItem("status"):""},M=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleChange=function(t,a){var n=a.name,l=a.value;e.setState(Object(E.a)({},n,l))},e.handleSubmit=function(t){var a,n,l,r,o,s,i,c;return b.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,t.preventDefault(),a=e.state,n=a.title,l=a.author,r=a.year,o=a.genre,s={"x-auth-token":A()},u.next=6,b.a.awrap(fetch("/api/books?title=".concat(n,"&author=").concat(l,"&year=").concat(r,"&genre=").concat(o),{headers:s}));case 6:return i=u.sent,u.next=9,b.a.awrap(i.json());case 9:0===(c=u.sent).length?alert("The library does not contain this book"):""===e.state.author&&""===e.state.title&&""===e.state.year&&""===e.state.genre?alert("You have not selected any search options"):c&&(console.log(c),e.props.showBooks(c)),u.next=17;break;case 13:u.prev=13,u.t0=u.catch(0),console.error(u.t0),e.setState({error:!0});case 17:case"end":return u.stop()}}),null,null,[[0,13]])},e.state={title:"",author:"",year:"",genre:"",error:!1},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.state.error?l.a.createElement(y.a,{open:!0,content:"Error, press F13 to continue or try refreshing page"}):l.a.createElement(C.a,{style:{marginTop:"30px"}},l.a.createElement(C.a.Field,null,l.a.createElement("div",{className:"ui labeled input"},l.a.createElement("label",{className:"ui right pointing label",style:{width:"40px"}},l.a.createElement("i",{className:"book icon"})),l.a.createElement(w.a,{placeholder:"Title",name:"title",value:this.state.title,onChange:this.handleChange}))),l.a.createElement(C.a.Field,null,l.a.createElement("div",{className:"ui labeled input"},l.a.createElement("label",{className:"ui right pointing label",style:{width:"40px"}},l.a.createElement("i",{className:"user icon"})),l.a.createElement(w.a,{placeholder:"Author",name:"author",value:this.state.author,onChange:this.handleChange}))),l.a.createElement(C.a.Field,null,l.a.createElement("div",{className:"ui labeled input"},l.a.createElement("label",{className:"ui right pointing label",style:{width:"40px"}},l.a.createElement("i",{className:"calendar check out icon"})),l.a.createElement(w.a,{placeholder:"Year",name:"year",type:"number",value:this.state.year,onChange:this.handleChange}))),l.a.createElement(C.a.Field,null,l.a.createElement("div",{className:"ui labeled input"},l.a.createElement("label",{className:"ui right pointing label",style:{width:"40px"}},l.a.createElement("i",{className:"list alternate outline icon"})),l.a.createElement(T.a,{placeholder:"Genre",name:"genre",value:this.state.genre,onChange:this.handleChange,options:P}))),l.a.createElement(k.a,{className:"orange ui button big",style:{width:"250px",marginLeft:"110px",marginTop:"10px"},onClick:this.handleSubmit,icon:"eye",labelPosition:"right",content:"Find books"}))}}]),t}(n.Component),z=Object(d.f)(M),D=function(){return localStorage.getItem("email")},L=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleOpen=function(){return e.setState({modalOpen:!0})},e.handleClose=function(){return e.setState({modalOpen:!1})},e.handleChange=function(t,a){var n=a.name,l=a.value;e.setState(Object(E.a)({},n,l))},e.handleUpload=function(t){var a=t.target,n=a.name,l=a.files;e.setState(Object(E.a)({},n,l[0]))},e.handleSubmit=function(t){var a,n,l,r,o,s,i,c,u;return b.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:t.preventDefault(),a=e.state,n=a.title,l=a.author,r=a.year,o=a.genre,s=a.bookCover,i=a.PDF,(c=new FormData).set("title",n),c.set("author",l),c.set("year",r),c.set("genre",o),c.set("bookCover",s),c.set("PDF",i),c.set("email",D()),u={"Content-Type":"multipart/form-data","x-auth-token":A()},v()({method:"post",url:"/api/books",data:c,headers:u}).then((function(t){console.log(t.data),e.setState({endmessage:"Success!"}),console.log(e.state.request)})).catch((function(t){e.setState({endmessage:t.response.data.message})}));case 12:case"end":return m.stop()}}))},e.state={title:"",author:"",year:"",genre:"",bookCover:null,PDF:null,modalOpen:!1,request:"",endmessage:"",borderColor:""},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement(y.a,{className:"entrance-center",size:"mini",trigger:l.a.createElement(k.a,{className:"olive ui button big",style:{marginTop:"10px",marginLeft:"80px",width:"250px"},onClick:this.handleOpen,icon:"plus",labelPosition:"right",content:"Add book"}),open:this.state.modalOpen,onClose:this.handleClose},l.a.createElement(y.a.Content,null,l.a.createElement(C.a,{onSubmit:this.handleSubmit,style:{padding:"5px"}},l.a.createElement(C.a.Field,null,l.a.createElement("div",{className:"ui labeled input"},l.a.createElement("label",{className:"ui right pointing label",style:{width:"40px"}},l.a.createElement("i",{className:"book icon"})),l.a.createElement(w.a,{placeholder:"Title",name:"title",value:this.state.title,onChange:this.handleChange}))),l.a.createElement(C.a.Field,null,l.a.createElement("div",{className:"ui labeled input"},l.a.createElement("label",{className:"ui right pointing label",style:{width:"40px"}},l.a.createElement("i",{className:"user icon"})),l.a.createElement(w.a,{placeholder:"Author",name:"author",value:this.state.author,onChange:this.handleChange}))),l.a.createElement(C.a.Field,null,l.a.createElement("div",{className:"ui labeled input"},l.a.createElement("label",{className:"ui right pointing label",style:{width:"40px"}},l.a.createElement("i",{className:"calendar check out icon"})),l.a.createElement(w.a,{placeholder:"Year",name:"year",type:"number",value:this.state.year,onChange:this.handleChange}))),l.a.createElement(C.a.Field,null,l.a.createElement("div",{className:"ui labeled input"},l.a.createElement("label",{className:"ui right pointing label",style:{width:"40px"}},l.a.createElement("i",{className:"list alternate outline icon"})),l.a.createElement(T.a,{style:{width:"268px"},placeholder:"Genre",name:"genre",value:this.state.genre,onChange:this.handleChange,options:P}))),l.a.createElement(C.a.Field,null,l.a.createElement("h5",{style:{margin:"10px 0px 6px 0px"}},"Cover image (JPEG/PNG)"),l.a.createElement(w.a,{type:"file",name:"bookCover",icon:"file image",onChange:this.handleUpload})),l.a.createElement(C.a.Field,null,l.a.createElement("h5",{style:{margin:"10px 0px 6px 0px"}},"PDF file"),l.a.createElement(w.a,{type:"file",name:"PDF",icon:"file pdf",onChange:this.handleUpload})),l.a.createElement(y.a.Actions,null,l.a.createElement(k.a,{className:"orange ui button",onClick:this.handleClose,style:{marginLeft:"0px"}},l.a.createElement(S.a,{name:"external alternate"}),"Leave"),l.a.createElement(k.a,{className:"olive ui button",type:"submit",floated:"right"},l.a.createElement(S.a,{name:"plus"}),"Add book"),"Success!"===this.state.endmessage?l.a.createElement("h5",{style:{color:"green",display:"flex",justifyContent:"center"}},this.state.endmessage):l.a.createElement("h5",{style:{color:"red",display:"flex",justifyContent:"center"}},this.state.endmessage)))))}}]),t}(n.Component),I=Object(n.createContext)({}),Y=I.Provider,_=I,G=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).showFavorites=function(){var e;return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==a.context.favorites.length){t.next=4;break}alert("You dont have any favorite book"),t.next=9;break;case 4:return t.next=6,b.a.awrap(v.a.get("/api/favourites"));case 6:e=t.sent,console.log(e.data),a.props.showBooks(e.data);case 9:case"end":return t.stop()}}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{color:"red",icon:"heart",content:"My Favorites",onClick:this.showFavorites}))}}]),t}(n.Component);G.contextType=_;var R=G,U=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).getBooks=function(e){var t,n,l;return b.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e.preventDefault(),t={"x-auth-token":A()},r.next=5,b.a.awrap(fetch("/api/books",{headers:t}));case 5:return n=r.sent,r.next=8,b.a.awrap(n.json());case 8:0===(l=r.sent).length?alert("The library does not contain this book"):a.props.showBooks(l),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),alert("The value is not allowed");case 15:case"end":return r.stop()}}),null,null,[[0,12]])},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{className:"ui yellow button big",style:{marginTop:"10px",width:"250px"},onClick:this.getBooks,icon:"eye",labelPosition:"right",content:"Show all books"}))}}]),t}(n.Component),H=a(245),J=a(246),q=a(454),K=a(244),Q=a.n(K),V=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleOpen=function(){return e.setState({modalOpen:!0})},e.handleClose=function(){return e.setState({modalOpen:!1})},e.deleteBook=function(){return e.setState({bookOnList:!1})},e.removeBookFromList=function(){return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.removeBook(e.props.book._id);case 1:case"end":return t.stop()}}))},e.deleteThisBook=function(t){var a;return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:t.preventDefault(),a=e.props.book._id,v.a.delete("/api/books/".concat(a)).then((function(t){null===t.data?e.setState({popupMessage:"This book has been deleted already"}):(e.setState({popupMessage:"This book has been removed"}),console.log("12"),setTimeout(e.removeBookFromList,1e3))})).catch((function(t){console.error(t),e.setState({popupMessage:"Couldn't remove this book"}),setTimeout((function(){return e.setState({popupMessage:null})}),1500)}));case 3:case"end":return n.stop()}}))},e.state={modalOpen:!1,popupMessage:null},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement(y.a,{size:"small",trigger:l.a.createElement(k.a,{size:"tiny",labelPosition:"left",color:"red",content:"Delete book",icon:"remove",onClick:this.handleOpen,floated:"right"}),open:this.state.modalOpen,onClose:this.handleClose},l.a.createElement(q.a,null,"Are you sure you want to delete this book?"),l.a.createElement(y.a.Content,null,l.a.createElement(C.a,{onSubmit:this.deleteThisBook},l.a.createElement(y.a.Actions,null,l.a.createElement(k.a,{style:{marginLeft:"0px"},onClick:this.handleClose},"Leave"),l.a.createElement(k.a,{type:"submit",color:"red",content:"Delete book",floated:"right",onClick:this.deleteBook}),l.a.createElement(y.a,{size:"small",open:!!this.state.popupMessage},l.a.createElement(B.a,{fluid:!0,color:"red"},l.a.createElement(B.a.Content,{header:this.state.popupMessage,textAlign:"center"})))))))}}]),t}(n.Component),W=function(e){function t(e,a){var n;Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e,a))).addToFavorites=function(e){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.awrap(v.a.post("/api/favourites?id=".concat(n.props.book._id)));case 3:n.setState({isFavourite:!0}),n.context.favorites.push(n.props.book.id),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),alert("Book not added. Please try later.");case 12:case"end":return e.stop()}}),null,null,[[0,8]])},n.removeFromFavorites=function(e){var t;return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.awrap(v.a.delete("/api/favourites?id=".concat(n.props.book._id)));case 3:n.setState({isFavourite:!1}),(t=n.context.favorites).splice(t.indexOf(n.props.book.id),1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),alert("Book not added. Please try later.");case 12:case"end":return e.stop()}}),null,null,[[0,8]])};var l=n.context.favorites,r=n.props.book.id;return n.state={isFavourite:l.includes(r)},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.state.isFavourite?l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{size:"massive",color:"red",icon:"undo alternate",labelPosition:"right",label:"Remove from favorites",onClick:this.removeFromFavorites,floated:"right"})):l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{size:"massive",color:"red",icon:"heart",labelPosition:"right",label:"Add to favorites",onClick:this.addToFavorites,floated:"right"}))}}]),t}(n.Component);W.contextType=_;var X=W,Z=[{value:"",text:"cancel this selection"},{value:"romance",text:"Romance"},{value:"fantasy",text:"Fantasy"},{value:"horror",text:"Horror"},{value:"crime",text:"Crime"},{value:"thriller",text:"Thriller"}],$=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={title:a.props.book.title,author:a.props.book.author,year:a.props.book.year,genre:a.props.book.genre,modalOpen:!1},a.handleOpen=function(){return a.setState({modalOpen:!0})},a.handleClose=function(){return a.setState({modalOpen:!1})},a.handleChange=function(e,t){var n=t.name,l=t.value;a.setState(Object(E.a)({},n,l))},a.handleSubmit=function(e){var t,n,l,r,o,s,i,c,u;return b.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:e.preventDefault(),t=a.props.book._id,n=a.state,l=n.title,r=n.author,o=n.year,s=n.genre,i={"x-auth-token":A()},c={title:l,author:r,year:o,genre:s},u={url:"/api/books/".concat(t),method:"PUT",data:c,headers:i},v()(u).catch((function(e){console.log(e)})),a.handleClose();case 8:case"end":return m.stop()}}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement(y.a,{size:"mini",trigger:l.a.createElement(k.a,{size:"massive",icon:"redo",color:"orange",labelPosition:"left",label:"Edit book",onClick:this.handleOpen,style:{marginLeft:"1px"},floated:"left",disabled:this.props.disabled}),open:this.state.modalOpen,onClose:this.handleClose},l.a.createElement(y.a.Content,null,l.a.createElement(C.a,null,l.a.createElement(C.a.Field,null,l.a.createElement(S.a,{color:"blue",name:"hand point down outline"}),l.a.createElement(S.a,{color:"blue",name:"keyboard"}),l.a.createElement(w.a,{placeholder:"Title",name:"title",value:this.state.title,onChange:this.handleChange})),l.a.createElement(C.a.Field,null,l.a.createElement(S.a,{color:"blue",name:"hand point down outline"}),l.a.createElement(S.a,{color:"blue",name:"keyboard"}),l.a.createElement(w.a,{placeholder:"Author",name:"author",value:this.state.author,onChange:this.handleChange})),l.a.createElement(C.a.Field,null,l.a.createElement(S.a,{color:"blue",name:"hand point down outline"}),l.a.createElement(S.a,{color:"blue",name:"keyboard"}),l.a.createElement(w.a,{placeholder:"Year",name:"year",type:"number",value:this.state.year,onChange:this.handleChange})),l.a.createElement(C.a.Field,null,l.a.createElement(S.a,{color:"blue",name:"hand point down outline"}),l.a.createElement(S.a,{color:"blue",name:"list alternate"}),l.a.createElement(T.a,{placeholder:"Genre",name:"genre",value:this.state.genre,onChange:this.handleChange,options:Z})))),l.a.createElement(y.a,{trigger:l.a.createElement(k.a,{size:"massive",className:"ui button",color:"orange",icon:"redo",labelPosition:"right",label:"Save changes",floated:"right",onClick:this.handleOpen})},l.a.createElement(q.a,null,"Are you sure you want to edit this book?"),l.a.createElement(y.a.Content,null,l.a.createElement(y.a.Actions,{onSubmit:this.handleClose},l.a.createElement(k.a,{color:"red",content:"No, don't edit this book",onClick:this.handleClose}),l.a.createElement(y.a,{trigger:l.a.createElement(k.a,{type:"submit",color:"green",content:"Yes, edit this book",floated:"right",onClick:this.handleSubmit})})))))}}]),t}(n.Component),ee=function(e){var t=e.book,a=e.removeBook,r=t.owner,o=t.title,s=t.author,i=t.genre,c=t.year,u=t.imgURL,m=Object(n.useState)(""),h=Object(H.a)(m,2),d=h[0],p=h[1],g=Object(n.useContext)(_)._id===r;return l.a.createElement(l.a.Fragment,null,l.a.createElement(B.a,{color:"grey",key:t._id,className:"entrance-center"},l.a.createElement(B.a.Content,null,u&&l.a.createElement(J.a,{floated:"right",size:"tiny",src:u}),l.a.createElement(B.a.Header,null,o),l.a.createElement(B.a.Meta,null,s),l.a.createElement(B.a.Meta,null,c)),l.a.createElement(B.a.Content,{extra:!0},l.a.createElement(y.a,{className:"entrance-left",size:"large",trigger:l.a.createElement(k.a,{type:"submit",className:"ui olive button",size:"tiny",icon:"eye",labelPosition:"right",content:"Show",floated:"left"})},l.a.createElement(y.a.Header,null,o," ",g&&l.a.createElement(V,{removeBook:a,book:t})),l.a.createElement(y.a.Content,{image:!0},u&&l.a.createElement(J.a,{wrapped:!0,size:"medium",src:u}),l.a.createElement(y.a.Description,null,l.a.createElement(q.a,null,"Details:"),l.a.createElement("p",null,"Author: ",s),l.a.createElement("p",null,"Year: ",c),l.a.createElement("p",null,"Genre: ",i),l.a.createElement(k.a,{icon:"file pdf",color:"red",size:"big",onClick:function(){v()({method:"get",url:"/api/PDFs.files/".concat(t.PDF),responseType:"arraybuffer"}).then((function(e){p("Your download should begin in a second"),Q()(e.data,"".concat(t.title,".pdf"))})).catch((function(e){var t=String.fromCharCode.apply(null,new Uint8Array(e.response.data));p(t)}))},style:{marginBottom:"15px"},floated:"left"}))),l.a.createElement(y.a.Actions,{style:{padding:"0"}},l.a.createElement(X,{book:t}),l.a.createElement($,{book:t,disabled:!g}),"Your download should begin in a second"===d?l.a.createElement("h4",{style:{color:"green",display:"flex",justifyContent:"center",margin:"10px 0 0 0"}},d):l.a.createElement("h4",{style:{color:"red",display:"flex",justifyContent:"center",margin:"10px 0 0 0"}},d))))))},te=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={books:[],modalIsOpen:!1},a.showBooks=function(e){a.setState({modalIsOpen:!0,books:e})},a.removeBook=function(e){var t=a.state.books.filter((function(t){return t._id!==e}));a.setState({books:t})},a.handleClose=function(){return a.setState({modalIsOpen:!1})},a.handleLogOut=function(e){localStorage.removeItem("email"),localStorage.removeItem("status")},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"ui rail",style:{height:"200px",width:"100%",position:"fixed",top:"0",left:"0",zIndex:"-1",borderColor:"orange",border:"10px"}},l.a.createElement("div",{className:"segment-background"}),l.a.createElement("div",{className:"lightning-background flashit"},l.a.createElement("h1",{className:"logo"},"BOOKSTORM"),l.a.createElement(S.a,{name:"bolt",size:"massive"}))),l.a.createElement("div",{style:{marginTop:"215px"}},l.a.createElement("div",{style:{marginLeft:"60%",display:"flex",justifyContent:"space-evenly"}},l.a.createElement(k.a,{className:"ui yellow button big",name:"logout",onClick:this.handleLogOut,as:h.b,to:"/login"},l.a.createElement("i",{className:"external alternate icon"}),"Log out"),l.a.createElement(R,{showBooks:this.showBooks}))),l.a.createElement(p.a,null,l.a.createElement("div",{style:{marginTop:"5%"}},l.a.createElement(z,{showBooks:this.showBooks,handleOpen:this.handleOpen}),l.a.createElement("div",{style:{marginLeft:"450px",width:"100%",position:"relative",top:"-55px"}},l.a.createElement(U,{showBooks:this.showBooks}),l.a.createElement(L,null)),l.a.createElement(y.a,{size:"large",open:this.state.modalIsOpen,onClose:this.handleClose},l.a.createElement(y.a.Content,null,l.a.createElement(B.a.Group,{itemsPerRow:3},this.state.books.map((function(t){return l.a.createElement(ee,{key:t._id,book:t,removeBook:e.removeBook})}))))))))}}]),t}(n.Component),ae=(a(435),a(453)),ne=a(448),le=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={user:null},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=A();t||(console.log("brak tokena"),this.props.history.push("/login")),v.a.get("api/users/me",{headers:{"x-auth-token":t}}).then((function(a){e.setState({user:a.data}),v.a.defaults.headers.common["x-auth-token"]=t})).catch((function(t){localStorage.removeItem("status"),console.log(t),e.props.history.push("/login")}))}},{key:"render",value:function(){return null===this.state.user?l.a.createElement(ae.a,{active:!0},l.a.createElement(ne.a,{size:"massive"},"Please wait...")):l.a.createElement(Y,{value:this.state.user},this.props.children)}}]),t}(l.a.Component),re=Object(d.f)(le),oe=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement(h.a,null,l.a.createElement(p.a,null,l.a.createElement(d.c,null,l.a.createElement(d.a,{path:"/login",component:F}),l.a.createElement(re,null,l.a.createElement(d.a,{path:"/",component:te})))))}}]),t}(l.a.Component);o.a.render(l.a.createElement(oe,null),document.getElementById("root"))}},[[256,1,2]]]);
//# sourceMappingURL=main.a7baf9a8.chunk.js.map